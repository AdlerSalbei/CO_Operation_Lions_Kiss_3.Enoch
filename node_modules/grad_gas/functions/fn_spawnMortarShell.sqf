params ["_pos"];
_pos set [2, 500];

//Create our projectile
private _projectile = "Sh_82mm_AMOS" createVehicle [0,0,100];
_projectile setPosATL _pos;
_projectile setVelocity [0,0,-100];
_projectile call CBRN_fnc_handleProjectile;

[
	{
		(((getPosATL _this) select 2) < 30)
	},
	{
		private _pos = getPos _this;
		private _detonator = "ClaymoreDirectionalMine_Remote_Ammo_Scripted_Fake" createVehicle [0,0,0];
		_detonator setPos _pos;
		_detonator setDamage 1;
		deleteVehicle _this;	

		[_pos vectorAdd [0,0, 15], 15, 90, 2, (_pos # 2) / 2, 0.6] remoteExecCall ["grad_gas_fnc_spawnMist", -2];
	},
	_projectile
] call CBA_fnc_waitUntilAndExecute;
